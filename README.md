# Senzor server

This is a simple server application that can be used to test the a sensors capabilities to send data.

## Usage

To use the server, you need to have [Node.js](https://nodejs.org/en/) and [PHP Composer](https://getcomposer.org/) installed. Then you can run the following commands:

```bash
composer install
npm install
```

The server uses a SQLite database, so you need to that it is supported by your PHP installation.

Then run the create table script from [database_create.php](database_create.php), which can also be seen in the menu of [index.php](index.php).

The server runs on PHP and can be eun either on a dedicated server or on a local machine (_I used XAMPP_).

## Send data

To send data to the server, you need to send a POST request to the server, to the following url:

    <your_ip_address>/senzorserver_openhub/post_request.php

The request should contain the following data:

```json
{
  "apikey": "<your_api_key>",
  "temperature_c": 24.5,
  "humidity": 47,
  "pm2_5": 18.7,
  "pm10": 27.3,
  "GPS_lat": 45.4215737,
  "GPS_lon": 28.0596734,
  "GPS_vit": 12.4125
}
```

1. apikey - string - generated by the server (currently a 32-byte string `bin2hex(random_bytes(32))`)
2. temperature_c - float - temperature in degrees Celsius
3. humidity - int - humidity in percentage
4. pm2_5 - float - pm2.5 value
5. pm10 - float - pm10 value
6. GPS_lat - double - gps value for latitude, with a precision of 7 decimal places, usually transmitted only at initialization and when needed (i.e. the device is stolen)
7. GPS_lon - double - gps value for longitude, with a precision of 7 decimal places, usually transmitted only at initialization and when needed (i.e. the device is stolen)
8. GPS_vit - double - gps value for the speed, with a precision of 4 decimals, usually transmit only at initialization and when needed (i.e. the device is stolen)
9. date_time - string - optional - current date and time, usually set by the server and not transmitted

The server sends back a JSON response with the following data:

```json
{
  "status": "ok",
  "message": "Data received"
}
```

## Data Visualization

The data can be visualized by opening the following url in a browser:

    <your_ip_address>/senzorserver_openhub/index.php

On this page you can also add new data.

## License

This project is licensed under the MIT License - see the [LICENSE](LICENSE) file for details
